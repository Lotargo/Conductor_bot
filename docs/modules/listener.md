# Модуль Listener

## Обзор

Модуль `Listener` является точкой входа в систему Conductor. Он представляет собой веб-сервер на основе FastAPI, который прослушивает входящие HTTP-запросы (веб-хуки) для инициирования рабочего процесса обработки сообщений.

## Функциональность

Основная задача модуля — принять уведомление о новом событии (например, о новом сообщении в чате), извлечь из него идентификатор чата (`chat_id`) и запустить следующий компонент в цепочке — модуль `Screenshotter`.

Ключевые операции:
1.  Принимает POST-запрос на эндпоинт `/webhook`.
2.  Извлекает `chat_id` из тела JSON-запроса.
3.  Вызывает функцию `trigger_screenshot` из модуля `Screenshotter`, передавая ей `chat_id`.
4.  Возвращает ответ о статусе операции.

## API Эндпоинт

### `POST /webhook`

Этот эндпоинт принимает веб-хуки от внешних систем (например, мессенджеров).

**Тело запроса (JSON):**
```json
{
  "chat_id": "some_unique_chat_id"
}
```

**Пример использования (cURL):**
```bash
curl -X POST http://localhost:8000/webhook \
-H "Content-Type: application/json" \
-d '{"chat_id": "user123_chat456"}'
```

**Ответ в случае успеха (200 OK):**
```json
{
  "status": "ok",
  "message": "Screenshot process triggered for chat_id: user123_chat456"
}
```

**Ответ в случае ошибки (400 Bad Request), если `chat_id` отсутствует:**
```json
{
  "status": "error",
  "message": "chat_id is required"
}
```