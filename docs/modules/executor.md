# Модуль Executor

## Обзор

Модуль `Executor` (Исполнитель) является конечным звеном в рабочем процессе Conductor. Он отвечает за выполнение конкретных действий, предписанных модулем `Decision Engine`, **и направляет их на нужную платформу**.

## Функциональность

Основная задача модуля — получать команды из Kafka и исполнять их, используя правильный метод доставки для каждой платформы.

Ключевые операции:
1.  **Прослушивание Kafka**: Потребляет сообщения из топика `KAFKA_TOPIC_ACTIONS`.
2.  **Анализ команды**: Извлекает из сообщения `action`, `text`, `chat_id` и, что самое важное, **`platform`**.
3.  **Выбор исполнителя**: На основе значения поля `platform` решает, какой метод использовать:
    *   Если `platform` — `"telegram"`, он использует `_execute_telegram_action` для отправки сообщения через Telegram Bot API.
    *   Если `platform` — `"whatsapp"`, он использует `_execute_whatsapp_action` для имитации отправки.
4.  **Выполнение**: Отправляет сообщение или имитирует действие.

## Формат входящего сообщения (из Decision Engine)

```json
{
  "action": "send_message",
  "target": "@all",
  "text": "Hello! How can I help you today?",
  "chat_id": "some_unique_chat_id",
  "platform": "telegram"
}
```

**Поля:**
*   `action` (string): Действие, которое нужно выполнить.
*   `target` (string): Цель действия.
*   `text` (string): Текст для отправки.
*   `chat_id` (string): Идентификатор чата.
*   `platform` (string): Платформа для выполнения действия (`whatsapp` или `telegram`).

## Логика выполнения

-   **Для Telegram**: Модуль использует библиотеку `python-telegram-bot` для асинхронной отправки реального сообщения в указанный `chat_id`.
-   **Для WhatsApp**: Модуль имитирует выполнение, выводя в лог информацию о том, что сообщение было бы отправлено. В будущем здесь может быть интегрирован Playwright или официальный API.