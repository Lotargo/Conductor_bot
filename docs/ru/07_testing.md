# Руководство по тестированию

В этом руководстве описаны шаги по настройке окружения и запуску тестов для проекта Sentio Engine.

## 1. Настройка окружения

### 1.1. Установка Poetry

Poetry используется для управления зависимостями проекта.

**Windows (PowerShell):**
```powershell
(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | py -
```

**macOS / Linux:**
```bash
curl -sSL https://install.python-poetry.org | python3 -
```

После установки может потребоваться перезапустить терминал.

### 1.2. Установка зависимостей проекта

1.  Перейдите в директорию `sentio_engine`.
2.  Выполните команду:
    ```bash
    poetry install
    ```

## 2. Юнит-тесты

Юнит-тесты проверяют отдельные компоненты приложения в изоляции. Они не требуют запуска Docker или Redis.

Для запуска выполните из директории `sentio_engine`:
```bash
poetry run pytest
```

## 3. Интеграционный тест (с Docker)

Этот тест проверяет взаимодействие `sentio-engine` с Redis.

### 3.1. Запуск сервисов

В корневой директории проекта выполните:
```bash
docker compose up --build -d
```
Эта команда запустит приложение и Redis.

### 3.2. Запуск тестового скрипта

После запуска сервисов выполните из директории `sentio_engine`:
```bash
poetry run python tests/integration_test.py
```
Скрипт проверяет, что кэширование работает, сравнивая время ответа при первом (промах кэша) и втором (попадание в кэш) запросах.

### 3.3. Остановка сервисов

После завершения теста остановите контейнеры:
```bash
docker compose down
```

---

**Ранее:** [Стратегия кэширования](./06_caching_strategy.md)
