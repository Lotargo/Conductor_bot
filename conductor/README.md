# Проект "Conductor"

## Описание

"Conductor" — это AI-ассистент для проактивной модерации групповых чатов, разработанный для повышения эффективности коммуникации и ускорения принятия решений. Система построена на событийно-ориентированной архитектуре, где независимые модули взаимодействуют асинхронно через брокер сообщений.

## Структура проекта

Проект разделен на следующие модули:

-   **/listener**: Веб-сервер на FastAPI, который принимает входящие Webhook-уведомления о новых сообщениях.
-   **/screenshotter**: Модуль, отвечающий за создание скриншотов уведомлений (в текущей версии имитируется).
-   **/orchestrator**: Ядро скриптовой логики. Управляет состоянием, запускает таймеры и формирует задачи для AI.
-   **/decision_engine**: Модуль, который обращается к LLM (через `Magic Proxy`) для принятия решений на основе полученных данных.
-   **/executor**: "Руки" системы. Выполняет команды, полученные от `decision_engine` (например, отправка сообщения в чат).
-   **/shared**: Общие компоненты, включая "заглушки" (`mocks.py`) для Kafka и базы данных, используемые для разработки.
-   **/personas**: Директория для хранения JSON-манифестов, описывающих различные стили поведения (персоны) AI-агента.
-   **config.py**: Файл с основными настройками проекта.
-   **requirements.txt**: Список зависимостей Python.

## Принцип работы

1.  `listener` получает уведомление о новом сообщении.
2.  Он вызывает `screenshotter`, который делает "скриншот" и отправляет его в очередь Kafka.
3.  `orchestrator` получает скриншот, запускает таймер и собирает все последующие уведомления в течение заданного времени.
4.  По истечении таймера `orchestrator` формирует задачу (с контекстом, историей и скриншотами) и отправляет ее в очередь `decision_requests`.
5.  `decision_engine` получает задачу, обращается к AI для принятия решения и отправляет команду в очередь `execution_actions`.
6.  `executor` получает команду и выполняет ее.

## Запуск и Интеграция

### Быстрый старт (локальная разработка)

Для удобства все модули можно запустить одной командой с помощью скрипта `run.py`. Он использует "заглушки" для внешних сервисов и идеально подходит для быстрой разработки и тестирования.

1.  **Установка зависимостей:**
    ```bash
    pip install -r conductor/requirements.txt
    ```

2.  **Запуск системы:**
    ```bash
    python conductor/run.py
    ```
    Этот скрипт запустит все компоненты в отдельных потоках.

### Подробная инструкция по интеграции

Для получения детальной информации о том, как подключить "Conductor" к реальному WhatsApp Business API и добавить его в групповой чат, пожалуйста, обратитесь к следующему документу:

-   **[Инструкция по запуску и интеграции (INSTRUCTIONS.md)](INSTRUCTIONS.md)**